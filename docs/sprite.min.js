'use strict';function Sprite(a){var j,k,l,m,o,b=0,c=-1,d=null,e=!1,f=a.err,g=new Error('Animation is already playing'),h=new RangeError('Parameter must be between 1 and '+u),i=new Error('Missing property'),p=document.getElementById(a.id),q=p.width=a.width,r=p.height=a.height,s=p.getContext('2d'),t=new Image,u=a.image_width?a.image_width/q:function(){throw i}();t.src=a.src,s.drawImage(t,b*q,0,q,r,0,0,q,r),this.loop=function(z,A,B){if(e&&f)throw g;null==z&&(z=60),null!==B&&(l=0);var C=1e3/z;j=requestAnimationFrame(v.bind(null,B,C,A)),e=!0},this.play=function(z,A,B,C){if(e&&f)throw g;if(B>u&&f)throw h;if(1>A&&f)throw h;null==z&&(z=60),null==A&&(A=0),null==B&&(B=u-1),null==C&&(C=1),null!=o&&o&&l===l&&null!=l||(B>A&&(l=0),A>B&&(l=1));var D=1e3/z;b=A-1,A--,B--,e=!0,k=requestAnimationFrame(w.bind(null,A,B,C,D))},this.pause=function(){if(!e&&f)throw g;cancelAnimationFrame(j),cancelAnimationFrame(k),e=!1,o=!0,c=-1},this.reset=function(z){null==z&&(z=0),cancelAnimationFrame(j),cancelAnimationFrame(k),e=!1,c=-1,b=z-1,s.clearRect(0,0,q,r),s.drawImage(t,--z*q,0,q,r,0,0,q,r)},this.frame=function(){return b+1};var v=function(z,A,B,C){null==d&&(d=C),j=requestAnimationFrame(v.bind(null,z,A,B));var D=Math.floor((C-d)/A);D>c&&(b==u-1&&l++,c=D,s.clearRect(0,0,q,r),s.drawImage(t,b*q,0,q,r,0,0,q,r),'backward'==B?(0>=b&&(b=u),b-=1):b>=u-1?b=0:b++),null!==typeof z&&0<z&&(l==z&&1==b&&'backward'!==B&&(e=!1,o=!1,cancelAnimationFrame(j)),l==z&&b==u-1&&'backward'==B&&(e=!1,o=!1,cancelAnimationFrame(j)))},w=function(z,A,B,C,D){console.log(z,A,B),k=requestAnimationFrame(w.bind(null,z,A,B,C)),null===d&&(d=D);var E=Math.floor((D-d)/C);E>c&&(c=E,console.log(b,m),l>=B&&b==m&&0!==B&&(cancelAnimationFrame(k),e=!1,o=!1),s.clearRect(0,0,q,r),s.drawImage(t,b*q,0,q,r,0,0,q,r),A>z?(b>=A?b=z:b++,m=A,b==A&&l++):z>A&&(b<=A?b=z:b--,m=A,b==z&&l++))}}